---
import "../styles/global.css";
import MobileMenu from "../components/MobileMenu";
import DesktopMenu from "../components/DesktopMenu";

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Astrología y Conciencia" } = Astro.props;

interface MenuItem {
	href?: string;
	text: string;
	isDropdown?: boolean;
	items?: MenuItem[];
}

// Detectar si estamos en una página de curso
const isCursosPage = Astro.url.pathname.includes("/cursos/");
const homePrefix = isCursosPage ? "/" : "";

const menuItems: MenuItem[] = [
	{ href: `${homePrefix}#sobre-mi`, text: "Sobre Mí" },
	{ href: `${homePrefix}#prensa`, text: "Prensa" },
	{ href: `${homePrefix}#servicios`, text: "Servicios" },
	{
		text: "Cursos",
		isDropdown: true,
		items: [
			{ href: "/cursos/taller-revolucion-solar-1", text: "Taller de Revolución Solar 1" },
			{ href: "/cursos/taller-revolucion-solar-2", text: "Taller de Revolución Solar 2" },
			{ href: "/cursos/curso-3", text: "Curso 3" },
		],
	},
	{ href: `${homePrefix}#contacto`, text: "Contacto" },
];
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300..800&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
			rel="stylesheet"
		/>
	</head>

	<body class="min-h-screen font-funnel">
		<header
			class="w-full bg-white backdrop-blur-sm shadow-sm z-50 border border-[#f0123f]"
		>
			<nav class="container mx-auto px-4">
				<div class="flex justify-between items-center">
					<a href="/" class="-my-5 md:-my-7 lg:-my-9 cursor-pointer">
						{/* Logo */}
						<img
							src="/logo.png"
							alt="AstroConciencia"
							class="h-32 md:h-36 lg:h-40 w-auto object-contain object-center transition-all duration-300"
						/>
					</a>
					{/* Menú de escritorio */}
					<DesktopMenu client:load items={menuItems} />
					{/* Menú móvil */}
					<MobileMenu client:load items={menuItems} />
				</div>
			</nav>
		</header>
		<main>
			<slot />
		</main>
		<footer class="bg-white text-black pt-8">
			<div class="container mx-auto px-4">
				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					<div>
						<h3 class="text-xl font-semibold mb-4 text-[#ec6f60]">
							AstroConciencia
						</h3>
						<p>Los Astros como guía en tu camino evolutivo</p>
					</div>
					<div>
						<h3 class="text-xl font-semibold mb-4 text-[#ec6f60]">
							Contacto
						</h3>
						<ul class="space-y-2">
							<li>Email: astroconcienciacosmica@gmail.com</li>
							<li>Instagram: @astro.conciencia</li>
						</ul>
					</div>
					<div>
						<h3 class="text-xl font-semibold mb-4 text-[#ec6f60]">
							Enlaces Rápidos
						</h3>
						<ul class="space-y-2">
							<li>
								<a
									href={`${homePrefix}#sobre-mi`}
									class="hover:text-[#ec6f60]">Sobre Mí</a
								>
							</li>
							<li>
								<a
									href={`${homePrefix}#servicios`}
									class="hover:text-[#ec6f60]">Servicios</a
								>
							</li>
							<li>
								<a
									href="/cursos/taller-revolucion-solar-1"
									class="hover:text-[#ec6f60]">Taller de Revolución Solar 1</a
								>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div
				class="border border-[#f0123f] mt-8 py-2 text-center text-sm text-black"
			>
				AstroConciencia &copy; 2025 &mdash; Desarrollado por
				<a
					href="https://pablomgdev.netlify.app/"
					target="_blank"
					rel="noopener noreferrer"
					class="text-[#f0123f] hover:underline ml-1"
				>
					PabloMG
				</a>
			</div>
		</footer>
	</body>
</html>
